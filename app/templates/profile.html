{% extends "base_dashboard.html" %}
{% block title %}Profile - Crawl Comments{% endblock %}

{% block content %}
<div class="p-8">
  <!-- Header -->
  <div class="mb-6">
    <nav class="flex items-center space-x-2 text-sm mb-4">
      <span class="text-gray-500 dark:text-gray-400">User</span>
      <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
      <span class="text-gray-900 dark:text-white font-medium">Profile</span>
    </nav>
  </div>

  <!-- Profile Card -->
  <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden">
    <!-- Profile Header -->
    <div class="p-6 border-b border-gray-200 dark:border-slate-700">
      <div class="flex items-center">
        <div class="h-24 w-24 bg-gray-200 dark:bg-slate-600 rounded-full flex items-center justify-center">
          <span class="text-3xl font-semibold text-gray-500 dark:text-gray-300">
            {% if current_user.username %}{{ current_user.username[:2].upper() }}{% else %}NS{% endif %}
          </span>
        </div>
        <div class="ml-6">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">{{ current_user.username or 'Not Set Yet' }}</h2>
          <p class="text-gray-500 dark:text-gray-400">{{ current_user.email }}</p>
          {% if current_user.plan_type == 'pro' %}
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 mt-2">⭐ PRO</span>
          {% else %}
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 mt-2">FREE (còn {{ current_user.trial_uses }}/{{ current_user.max_trial_uses }} lượt)</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="border-b border-gray-200 dark:border-slate-700">
      <nav class="flex" id="profile-tabs">
        <button type="button" data-tab="subscription" class="tab-btn flex-1 py-4 px-4 text-center text-sm font-medium text-white bg-gray-800 dark:bg-slate-700 rounded-t-lg">
          <svg class="h-4 w-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
          Gói đăng ký
        </button>
        <button type="button" data-tab="email" class="tab-btn flex-1 py-4 px-4 text-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent hover:border-gray-300 transition-colors">
          <svg class="h-4 w-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          Change email
        </button>
        <button type="button" data-tab="password" class="tab-btn flex-1 py-4 px-4 text-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent hover:border-gray-300 transition-colors">
          <svg class="h-4 w-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
          Change password
        </button>
        <button type="button" data-tab="delete" class="tab-btn flex-1 py-4 px-4 text-center text-sm font-medium text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 border-b-2 border-transparent hover:border-red-300 transition-colors">
          <svg class="h-4 w-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
          Delete account
        </button>
      </nav>
    </div>

    <!-- Tab Contents -->
    <div class="p-6">
      <!-- Subscription Tab -->
      <div id="tab-subscription" class="tab-content">
        <div class="space-y-6">
          <!-- Plan Info Card -->
          <div class="{% if current_user.plan_type == 'pro' %}bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20 border-primary-200 dark:border-primary-800{% else %}bg-gray-50 dark:bg-slate-700/50 border-gray-200 dark:border-slate-600{% endif %} border rounded-xl p-6">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center">
                {% if current_user.plan_type == 'pro' %}
                <div class="h-12 w-12 bg-primary-500 rounded-full flex items-center justify-center mr-4">
                  <svg class="h-6 w-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                </div>
                <div>
                  <h3 class="text-xl font-bold text-gray-900 dark:text-white">Gói PRO</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Không giới hạn lượt scrape</p>
                </div>
                {% else %}
                <div class="h-12 w-12 bg-gray-400 dark:bg-slate-500 rounded-full flex items-center justify-center mr-4">
                  <svg class="h-6 w-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <div>
                  <h3 class="text-xl font-bold text-gray-900 dark:text-white">Gói FREE</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Dùng thử miễn phí</p>
                </div>
                {% endif %}
              </div>
              
              <!-- Status Badge -->
              {% if current_user.plan_type == 'pro' and current_user.plan_status == 'expired' %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">Đã hết hạn</span>
              {% elif current_user.plan_type == 'pro' %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">Đang hoạt động</span>
              {% elif current_user.trial_uses <= 0 %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">Hết lượt dùng thử</span>
              {% else %}
              <span class="px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">Đang dùng thử</span>
              {% endif %}
            </div>
            
            <!-- Plan Details -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
              <div class="bg-white dark:bg-slate-800 rounded-lg p-4">
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Loại gói</p>
                <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ 'PRO' if current_user.plan_type == 'pro' else 'FREE' }}</p>
              </div>
              <div class="bg-white dark:bg-slate-800 rounded-lg p-4">
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Lượt còn lại</p>
                <p class="text-lg font-semibold text-gray-900 dark:text-white">
                  {% if current_user.plan_type == 'pro' %}
                  ∞ Không giới hạn
                  {% else %}
                  {{ current_user.trial_uses }}/{{ current_user.max_trial_uses }}
                  {% endif %}
                </p>
              </div>
              <div class="bg-white dark:bg-slate-800 rounded-lg p-4">
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Ngày bắt đầu</p>
                <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ current_user.subscription_start.strftime('%d/%m/%Y') if current_user.subscription_start else current_user.created_at.strftime('%d/%m/%Y') if current_user.created_at else 'N/A' }}</p>
              </div>
              <div class="bg-white dark:bg-slate-800 rounded-lg p-4">
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Ngày hết hạn</p>
                <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ current_user.subscription_end.strftime('%d/%m/%Y') if current_user.subscription_end else 'Không có' }}</p>
              </div>
            </div>
          </div>
          
          <!-- Upgrade/Renew Button - Chỉ hiện khi cần thiết -->
          {% if current_user.plan_type == 'pro' and current_user.plan_status == 'expired' %}
          <!-- PRO hết hạn - Gia hạn -->
          <div class="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 border rounded-xl p-6">
            <div class="flex items-center mb-4">
              <svg class="h-6 w-6 text-red-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
              <h4 class="text-lg font-semibold text-red-800 dark:text-red-200">Gói PRO của bạn đã hết hạn!</h4>
            </div>
            <p class="text-red-700 dark:text-red-300 mb-4">Gia hạn ngay để tiếp tục sử dụng không giới hạn.</p>
            <a href="{{ url_for('main.contact_upgrade') }}" class="inline-flex items-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors">
              <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
              Gia hạn ngay
            </a>
          </div>
          {% elif current_user.plan_type == 'free' and current_user.trial_uses <= 0 %}
          <!-- FREE hết lượt - Nâng cấp PRO -->
          <div class="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 border rounded-xl p-6">
            <div class="flex items-center mb-4">
              <svg class="h-6 w-6 text-red-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              <h4 class="text-lg font-semibold text-red-800 dark:text-red-200">Bạn đã hết lượt dùng thử!</h4>
            </div>
            <p class="text-red-700 dark:text-red-300 mb-4">Nâng cấp lên PRO để tiếp tục scrape không giới hạn.</p>
            <a href="{{ url_for('main.pricing') }}" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors">
              <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
              Nâng cấp PRO
            </a>
          </div>
          {% endif %}
          <!-- PRO còn hạn hoặc FREE còn lượt → Không hiện gì -->
        </div>
      </div>

      <!-- Change Email Tab -->
      <div id="tab-email" class="tab-content hidden">
        <form action="{{ url_for('main.change_email') }}" method="POST">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Current Email</label>
              <input type="email" value="{{ current_user.email }}" disabled class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-gray-50 dark:bg-slate-700 text-gray-900 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Email</label>
              <input type="email" name="new_email" placeholder="Enter your new email" required class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Email</label>
              <input type="email" name="confirm_email" placeholder="Confirm your new email" required class="w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
            </div>
          </div>
          <div class="mt-6">
            <button type="submit" class="px-6 py-2 bg-gray-800 dark:bg-slate-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-slate-600 transition-colors">Save Changes</button>
          </div>
        </form>
      </div>

      <!-- Change Password Tab -->
      <div id="tab-password" class="tab-content hidden">
        <form action="{{ url_for('main.change_password_profile') }}" method="POST">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Current Password</label>
              <div class="relative">
                <input type="password" id="current_password" name="current_password" placeholder="Enter current password" required class="w-full px-4 py-2 pr-10 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                <button type="button" onclick="togglePassword('current_password', this)" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <svg class="eye-open h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  <svg class="eye-closed h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                  </svg>
                </button>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">New Password</label>
              <div class="relative">
                <input type="password" id="new_password" name="new_password" placeholder="Enter new password" required class="w-full px-4 py-2 pr-10 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                <button type="button" onclick="togglePassword('new_password', this)" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <svg class="eye-open h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  <svg class="eye-closed h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                  </svg>
                </button>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
              <div class="relative">
                <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm new password" required class="w-full px-4 py-2 pr-10 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                <button type="button" onclick="togglePassword('confirm_password', this)" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <svg class="eye-open h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  <svg class="eye-closed h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="mt-6">
            <button type="submit" class="px-6 py-2 bg-gray-800 dark:bg-slate-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-slate-600 transition-colors">Save Changes</button>
          </div>
        </form>
      </div>

      <!-- Delete Account Tab -->
      <div id="tab-delete" class="tab-content hidden">
        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-red-800 dark:text-red-200 mb-2">⚠️ Cảnh báo</h3>
          <p class="text-red-700 dark:text-red-300 mb-4">Hành động này không thể hoàn tác. Tất cả dữ liệu của bạn sẽ bị xóa vĩnh viễn.</p>
          <form action="{{ url_for('main.delete_account') }}" method="POST" onsubmit="return confirm('Bạn có chắc chắn muốn xóa tài khoản?');">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="mb-4">
              <label class="block text-sm font-medium text-red-700 dark:text-red-300 mb-2">Nhập mật khẩu để xác nhận</label>
              <div class="relative w-full max-w-md">
                <input type="password" id="delete_password" name="password" placeholder="Enter your password" required class="w-full px-4 py-2 pr-10 border border-red-300 dark:border-red-700 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent">
                <button type="button" onclick="togglePassword('delete_password', this)" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <svg class="eye-open h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  <svg class="eye-closed h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
                  </svg>
                </button>
              </div>
            </div>
            <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">Delete Account</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabs = document.querySelectorAll('.tab-btn');
  const contents = document.querySelectorAll('.tab-content');
  
  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const targetTab = this.dataset.tab;
      tabs.forEach(t => {
        t.classList.remove('text-white', 'bg-gray-800', 'dark:bg-slate-700', 'rounded-t-lg');
        t.classList.add('text-gray-500', 'hover:text-gray-700', 'dark:text-gray-400', 'dark:hover:text-gray-200', 'border-b-2', 'border-transparent', 'hover:border-gray-300');
      });
      this.classList.remove('text-gray-500', 'hover:text-gray-700', 'dark:text-gray-400', 'dark:hover:text-gray-200', 'border-b-2', 'border-transparent', 'hover:border-gray-300');
      this.classList.add('text-white', 'bg-gray-800', 'dark:bg-slate-700', 'rounded-t-lg');
      contents.forEach(c => c.classList.add('hidden'));
      document.getElementById('tab-' + targetTab).classList.remove('hidden');
    });
  });
});
</script>
{% endblock %}
